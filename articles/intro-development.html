<h2 class="border">Overview</h2>
<p>This article provides a guide for users interested in getting started developing their own packages for use in Foundry Virtual Tabletop. We believe in fostering and encouraging new developers and that Foundry VTT can be a great way to teach yourself the basics of JavaScript and other facets of modern web development. While we cannot provide a detailed introductory course to modern JavaScript, FVTT serves as a good framework in which to apply some of the lessons you might learn while completing such a course elsewhere.</p>    

<p>If you are reading this article and thinking "I can't do this, I'm not a programmer." This article is intended for you. Many users feel developing their own modules, systems, or even worlds for release as Foundry VTT packages have a high barrier to entry because of a common perception that programming is difficult. However, programming for Foundry VTT, while based on JavaScript, has an extremely low barrier to entry for those willing to learn some basic development practices. This article contains links to some free <a href="#resources">introductory level courses</a> which you can use to get started, and we feel it is important to emphasize that even an introductory level of JavaScript knowledge is sufficient to make modules and game systems for Foundry VTT.</p>

<p>It is important to credit community member Calego and his helpful <a href="https://hackmd.io/@akrigline/ByHFgUZ6u/%2FF4CFuxqZSTOcqgixEf9M6A" target="_blank">Module Making for Beginners article</a> for helping to inspire the approach our development articles use. With his permission, we have reused some of his tutorial to provide concise descriptions of common problems.</p>

<p class="note">If you are an experienced JS developer just looking for deep secrets and arcane knowledge of the API or a quickstart guide to getting your project going, please head directly to @Article[module-development] or @Article[system-development] as well as the <a href="https://foundryvtt.com/api/" target="_blank">API Documentation</a>.</p>
<h2 id="begin">Before you Begin</h2>
<p>Foundry Virtual Tabletop is a web application, and package development in FVTT uses web technologies. Specifically, packages rely upon four primary technologies which each serve an important role: HTML, CSS, JavaScript, and JSON. If you are new to web development - Foundry Virtual Tabletop can provide an excellent opportunity to learn these skills while creating something fun and useful for your roleplaying game table.</p>
<dl>
<dt>HTML</dt>
<dd>Used to define the structure and content of web pages and interface elements.</dd>
<dt>CSS</dt>
<dd>
<p>Used to define the layout and appearance of HTML elements.</p>
</dd>
<dt>JavaScript</dt>
<dd>
<p>Used to define behaviors and functions, handle underlying data, and provide the underlying framework for interacting with UI elements.</p>
</dd>
<dt>JSON</dt>
<dd>
<p>A universal data storage format which is used to store and transfer data used by web applications. Visit <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON" target="_blank" rel="nofollow noopener">JavaScript Object Notation (JSON)</a> to begin learning more about JSON.</p>
</dd>
</dl>
<p>Building a package for Foundry Virtual Tabletop will require use of some or all of these techniques. You do not need to be an expert, but it is important to know that this will be a learning process. While you undertake this journey be sure to remain patient and focus on making progress one step at a time. Building your first package will almost certainly take longer than you think, but as you learn your pace of progress should speed up considerably.</p>

<h3>Package Types</h3>
<p>Foundry Virtual Tabletop has a number of different package types, and before you begin with any project it will be important to know the differences between each.</p>
<dl>
   <dt>Game Worlds</dt> 
   <dd>primarily used for distributing adventure content intended for use with a particular Game System. Game Worlds are an enclosed package which typically contain all of the Documents needed for a Gamemaster to run a complete adventure or campaign from start to finish for their players. Game Worlds can also contain JavaScript and CSS files which will be loaded whenever that world is loaded, allowing you to provide specific functions and styling that only apply to this particular world.</dd>
   <dt>Game Systems</dt> 
   <dd>Generally more in-depth than either of the other packages due to the amount of data most role-playing games require. Game Systems typically include JavaScript files for handling the automation of rules for the game, as well as HTML and CSS to provide the appearance of facets of the game such as character sheets or items.</dd>
   <dt>Add-on Modules</dt> 
   <dd>The most common type of package and where most community developers begin. Add-on Modules use JavaScript files to extend and modify the behavior of Foundry Virtual Tabletop and its Game Systems, and HTML and CSS to provide a UI for users to interact with.</dd>
   
</dl>
<h3>Important Questions</h3>
<p>Now that you have a brief overview of the landscape, it's important to ask some questions and make some decisions about what your project will look like. These decisions are not set in stone- you can change them later if absolutely necessary, but starting out on a solid foundation will save hours of rework in the long run.</p>
<ul>
    <li>What is the purpose of your package? What goal do you wish to accomplish?</li>
    <li>What type of package do you intend to build?</li>
    <li>What knowledge will you need to get started?</li>
    <li>
        <ul>
            <li>In any case, you will need to understand the basics of JSON as a data structure.</li>
            <li>If your package is a world, you may not need JavaScript, CSS, or HTML knowledge to get started. You may only require the @Article[packaging-guide] and the @Article[content-creation-guide] to accomplish your goals.</li>
            <li>If you intend to create a character sheet for a new Game System, you will need some knowledge of JavaScript, HTML, and CSS.</li>
            <li>If you intend to create an Add-on Module, you will need some knowledge of JavaScript. If that Add-on Module will include a User Interface, you will require some knowledge of HTML, and CSS.</li>
        </ul>
    </li>
    <li>Is my package going to be just for my own use, or is it going to be available to the public?</li>
    <li>Does the package I intend to create use intellectual property belonging to someone else? See our @Article[licensing-guide] article for why this is important.</li>
</ul>

<h3 id="resources">Resources</h3>
<p>The following free resources are extremely useful for getting started with development knowledge and should provide you with sufficient skills to begin your project, even if you have no experience with web development.</p>
<p class="note info">Note: You do not need to complete all of these in full before beginning your project. You should begin working on your project while taking these courses.</p>
<h4>Introductory JavaScript</h4>
<ul>
    <li><a href="https://www.freecodecamp.org/news/learn-javascript-free-js-courses-for-beginners/#learn-javascript-full-course-for-beginners" target="_blank">(freeCodeCamp) Learn JavaScript - Introduction to Modern JavaScript</a></li>
    <li><a href="https://www.freecodecamp.org/news/learn-javascript-free-js-courses-for-beginners/#learn-javascript-full-course-for-beginners" target="_blank">(freeCodeCamp) Learn JavaScript – Full Course for Beginners</a></li>
    <li><a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript" target="_blank" rel="nofollow noopener">(MDN Web Docs) JavaScript - Dynamic client-side scripting</a></li>
</ul>
<h4>Introductory HTML</h4>
<ul>
    <li><a href="https://www.w3schools.com/html/html_intro.asp" target="_blank">(W3 schools)HTML Introduction</a></li>
    <li><a href="https://developer.mozilla.org/en-US/docs/Learn/HTML" target="_blank" rel="nofollow noopener">(MDN Web Docs) Structuring the web with HTML</a> </li>
    <li><a href="https://learn.shayhowe.com/html-css/" target="_blank">(Shay Howe) HTML & CSS</a></li>
</ul>
<h4>Introductory CSS</h4>
<ul>
    <li><a href="https://www.w3schools.com/css/css_intro.asp" target="_blank">(W3 schools)CSS Introduction</a></li>
    <li><a href="https://developer.mozilla.org/en-US/docs/Learn/CSS" target="_blank" rel="nofollow noopener">(MDN Web Docs) Learn to style HTML using CSS</a> </li>
    <li><a href="https://learn.shayhowe.com/html-css/" target="_blank">(Shay Howe) HTML & CSS</a></li>
</ul>

<h4>Choosing a Development Software</h4>
<p>There are an abundance of free options with built-in tools for assisting you as you begin your project, and the only right answer for choosing which suite works best is to identify which one works best for you. MDN Web Docs provides a <a href="https://developer.mozilla.org/en-US/docs/Learn/Getting_started_with_the_web/Installing_basic_software" target="_blank">comprehensive overview</a> of available tools and technologies to get you started.</p>
<p>If you'd prefer to get started quickly, any of the following tools will meet your initial needs:</p>
<ul><li><a href="https://code.visualstudio.com" target="_blank">(free) Visual Studio Code</a></li></ul>
<ul><li><a href="https://atom.io/" target="_blank">(free) Atom</a></li></ul>
<ul><li><a href="https://www.sublimetext.com/" target="_blank">(free) Sublime</a></li></ul>
<ul><li><a href="https://www.jetbrains.com/webstorm/" target="_blank">(paid) Jetbrains Webstorm</a></li></ul>

<h2 class="border">Common Concepts</h2> 
<p>Whether you are developing a World, System, or Module, there are some fundamental concepts which apply. As you develop your package, a good understanding of these will help guide your success.</p>
<h3 id="git">About Git</h3>
<p>Git is a software designed to assist developers with <strong>version control</strong>. As an oversimplification, Git is used to track any changes made to files within your project and maintains all of those files within a <strong>repository.</strong> Foundry Virtual Tabletop allows users to install packages from Git repositories remotely, which is why you will a vast majority of installation links for Foundry VTT packages are hosted at places like <a href="https://gitlab.com" target="_blank">GitLab</a> or <a href="https://gitlab.com" target="_blank">GitHub</a>.</p>
<p>Git was designed for handling a lot of complex facets of development, and development for Foundry VTT typically uses only a small percentage of the features Git offers. W3 Schools offers a detailed <a href="https://www.w3schools.com/git/" target="_blank">Git tutorial</a>. For convenience and simplicity, we recommend use of a GUI utility for managing your git repositories such as <a href="https://www.gitkraken.com/" target="_blank">GitKraken</a>.</p>

<h3 id="versioning">About Versioning</h3>
<p>A slightly more complex but important facet of development, Foundry VTT uses its own package management system so that the version of your package is the one the user wishes to be using. By versioning your package properly you can leverage some tools from the Foundry VTT API to make code changes to support your package across different versions of the software.</p>
<h4>How does Foundry VTT Determine if a Version is Newer?</h4>
<p>The helper method <code>isNewerVersion(availableVersion, currentVersion)</code> compares two version fields within the core software or within packages. At a very simplified level, this method compares the two versions and determines which is newer based on the following rules:</p>
<ol>
    <li>If availableVersion has more <code>.</code> deliniated parts than the currentVersion, it is determined to be newer.</li>
    <li>The version which is numerically higher is newer. (2 is greater than 1)</li>
    <li>An alphabetical character is newer based on its progression in the alphabet. (b is newer than a)</li>
</ol>

<h4>Version Recommendations</h4>
<p>There are many ways to assign version numbers to software and content packages as they are being developed. While Foundry VTT supports a number of different options, there are no strong recommendations to be made about any one above another. It should be noted that some common versioning schema that exist contain advanced details which Foundry VTT does not parse as part of its versioning checks.</p>
<dl>
<dt>Incrementing</dt>
<dd>A newer version has a higher alphanumeric value than a previous one. This is internally how Foundry works, using a form of <code>[Generation].[Build]</code>, such as 9.230. This is a simple version scheme that plays well to the strength of Continuous Integration frameworks. Recommended for user-facing packages, such as content and modules.
<pre>
<code>Example
1 -> 2 -> 3
1.1 -> 1.2 -> 2.0
alpha1 -> alpha2 -> beta1 -> stable1
</code>    
</pre>
</dd> 
<dt>Semantic Versioning (Semver)</dt>
<p class="note warning">Note: While basic usage is supported, advanced usage such as <code>+</code> or <code>-</code> notation for pre-releases is not.</p>
<dd>A popular 3-part versioning schema designed for use in software libraries. Semver follows the form of <code>[Major].[Minor].[Patch].</code> Recommended for Library packages, Game Systems, or CLI tools.
<pre>
<code>Example
1.0.0 -> 1.0.1 -> 1.1.0 -> 2.0.0
</code>    
</pre>
</dd> 
</dd> 
<dt>Calender Versioning (CalVer)</dt>
<p class="note warning">Note: While basic usage is supported, advanced usage such as <code>+</code> or <code>-</code> notation for pre-releases is not.</p>
<dd>A date-based scheme where the current date corresponds to the version of the package. This version number can be generated via Continuous Integration frameworks. Recommended for user-facing packages, such as content and modules.
<pre>
<code>Examples
2022-01-01 -> 2022-02-20 -> 2022-03-12
220101 -> 20220220 -> 20220312
</code>    
</pre>
</dd> 
</dl>

<h3 id="namespacing">About Namespacing</h3>
<p>A high-level concept for programming which applies equally to JavaScript as it does CSS, though in slightly different ways. Namespacing refers to the act of applying specific labels of your choosing to your code in order to ensure that someone else's code does not accidentally use yours by mistake.</p>
<blockquote>For a very simple analogy, imagine working in a large office and your coworker Bill asks you to go grab his lunch from the breakroom refridgerator. Upon arriving, you find five lunch bags labeled "Bill's Lunch" and discover that there are far more people named Bill in your office than you expected. Not knowing which one is the correct Lunch, you grab the first one and bring it back, where you and Bill discover it is not his. If Bill had written his full name on the lunch bag instead of just his first name, identifying the correct one to return with would have been far less confusing.</blockquote>
<p>Correctly namespacing your code is important to prevent confusion. This will likely be detailed more thoroughly by whichever JavaScript or CSS course you choose to undertake.</p>
<h3>Namespacing for Javascript</h3>
<p>While it is more important to correctly Namespace your code for script-based JS than ES6 Module JS, your JavaScript Functions should ideally be named in way that makes it unique. Foundry VTT takes steps to try to mitigate Namespace issues with its packages, but conflicts can happen. Two packages using "script" declarations instead of ES6 Modules may both define functions in the global scope which can collide and overwrite each other.</p>
<h3 id="css">Namespacing for CSS</h3>
<p>The importance of proper namespacing for CSS definitions is far greater. CSS considers two important factors when applying styles to HTML, the <strong>most recently loaded</strong> definition and the <strong>most specific</strong> definition. Using a CSS class definition which isn't specific enough will likely result in your CSS rules applying to an entire part of the program, or cause overlap with other packages. To prevent any unexpected confusion of CSS rules, please adhere to the following best practices:</p>
<h4>Use Specific Class and ID Names in HTML</h4>
<p>Instead of:</p>
<pre>
    
    <code>
        &lt;div id="selection" class="app"&gt;
            &lt;h2 class="header"&gt;Make a selection&lt;/h2&gt;
          &lt;/div&gt;
    </code>
</pre>
<p>use:</p>
<pre>
    <code>
        &lt;div id="my-package-selection" class="my-package my-package-app"&gt;
            &lt;h2 class="header"&gt;Make a selection&lt;/h2&gt;
        &lt;/div&gt;
    </code>

</pre>
<h4>Use Specific Selectors in CSS</h4>
<p>Instead of:</p>
<pre>
    <code>
        .app {
            background-color: gray;
          }
          .header {
            color: red;
          }
    </code>
</pre>
<p>use:</p>
<pre>
    <code>
        .my-package .my-package-app {
            background-color: gray;
          }
          .my-package .my-package-header {
            color: red;
          }
    </code>
</pre>
<p>By using clear and specific Namespace for your CSS, you can prevent conflict with other packages very easily and keep the package ecosystem healthy for all users.</p>

<h3>Flags</h3>
<p>All Documents within the Foundry VTT data schema contain a data object called Flags. Flags are intended to store persistent data for modules primarily, but can also be leveraged by world scripts and systems as a place to store data which doesn't necessarily adhere to the data structure provided by a game system.</p>
<p>Flag data is generally stored as a key-value object pair, and each flag should be set using a scope which provides a namespace for the flag to help prevent collisions. Flags set by the core software use the <code>core</code> scope. Flags set by game systems or modules should use the canonical <code>name</code> attribute for the module Flags set by an individual world should "world" as the scope.</p> 
<ul>
    <li><a href="https://foundryvtt.com/api/abstract.Document.html#setFlag" target="_blank">Document#setFlag</a></li>
    <li><a href="https://foundryvtt.com/api/abstract.Document.html#getFlag" target="_blank">Document#getFlag</a></li>
    <li><a href="https://foundryvtt.com/api/abstract.Document.html#unsetFlag" target="_blank">Document#unsetFlag</a></li>    
</ul>
<p></p>
<h3>Hooks</h3>
<p>Hooks are an event framework Foundry VTT uses to provide package developers with the ability to register callback functions that occur at particular times as events within the program occur. For example, the <code>preCreateActor</code> Hook allows you to make changes to the data model for an Actor when its creation process is started but before the Actor is created. </p>
<h4>Using A Hook to Log Hooks</h4>
<p>One of the most common Hooks to use, <code>init</code>, allows your package to perform actions the moment the program loads a world, before it loads the Canvas or finishes preparing the UI. In the below example, we will provide steps to answer a common question about hooks by using an <code>init</code> Hook.</p>
<p class="note warning">If using this code snippet, please ensure to remove or comment this function out to prevent generating a large volume of logged messages for users of your package.</p>
<pre>
<code>
    //Use this in your module's primary JS file to log whenever a Hook event occurs.
    Hooks.once("init", function() {
        CONFIG.debug.hooks = true
    }
</code>
</pre>
<p><a href="https://foundryvtt.com/api/Hooks.html" target="_blank">More about Hooks</a></p>
<h3>Localization</h3>
<p>Foundry VTT offers a Localization system in order to provide convenience for translators to work with projects internal to the FVTT application. It’s important to start thinking about localization early in the project, as it is much easier to do it as you develop rather than returning after you have completed the project to add the localization. When developing your project, consider using Localization text <strong>everywhere</strong> you would normally write text for your users to read. This will mean that other developers wishing to translate your project can do so very easily. For more information, please see @Article[localization].</p>
<ul>
    <li><a href="https://foundryvtt.com/api/Localization.html" target="_blank">The Localization Helper Class</a></li>
    <li><a href="https://foundryvtt.com/api/HandlebarsHelpers.html#.localize" target="_blank">The Localize Handlebars Helper</a></li>
</ul>

<h2 class="border">The Foundry VTT API </h2>
<p>We provide detailed <a href="https://foundryvtt.com/api/index.html" target="blank">API Documentation</a> for our development community to use. First time developers may find the documentation to be overwhelming at first, but it is broken down into clear categories with increasing levels of detail and examples of usage with each subcategory. Given the level of depth the API documentation provides, beginners should focus on choosing a topic they're interested in exploring from the main index (home) rather than selecting from the quick-reference sidebar. The table of contents at the beginning of the main index is helpfully broken down by major topics. </p>
<p>Some convenient links for the most common API topics:</p>
<ul>
    <li><a href="https://foundryvtt.com/api/index.html#documents-and-data" target="_blank">Documents and Data</a> - An explanation of the data model FVTT uses for storing its Documents</li>
    <li><a href="https://foundryvtt.com/api/index.html#the-game-canvas" target="_blank">The Game Canvas</a> - Everything that occurs on the canvas layer, where tokens, scene backgrounds, lighting, walls and more are rendered by the PixiJS library. </li>
    <li><a href="https://foundryvtt.com/api/index.html#dice-rolling" target="_blank">Dice Rolling</a> - Data structures and functions related to dice rolling including syntax for expressions, evaluation and persistence, and custom rolling modifiers or mechanics.</li>
</ul>

<h2 class="border">Using Handlebars</h2>
<p>Handlebars is a simple templating language used by Foundry VTT to structure HTML based on JavaScript object data stored by systems, modules, and FVTT itself. You can find out more about <a href="https://handlebarsjs.com/guide/" target="_blank" rel="nofollow noopener">Handlebars by clicking here.</a> Handlebars helpers are used in html files to provide ways for your developed Applications, Sheets, or other UI elements a way to interact with or modify data.</p>
<h4>The Log Helper</h4>
<p>One of the more convenient options helpful for beginner developers is the use of the <code>{{log}}</code> helper</p>
<pre><code>
    {{log "!!!!! DOCUMENT DATA !!!!!"}}
    {{log this}}
    &lt;h1&gt;An Example Document, Such as an Actor Sheet&lt;/h1&gt;
    &lt;p&gt; Some body text &lt;/p&gt;
    &lt;label for="name"&gt; Name:&lt;/label&gt;
    &lt;input id="name" type="text"/&gt;
</code></pre>
<p>As a default helper included in Handlebars, the Log helper displays in your JavaScript Console the output of JavaScript data. By using <code> log this</code> it will output the data structure of the current Document as Handlebars sees it, making it easy to reference stored data by eliminating any of the guesswork about where that data is stored. By expanding the data object logged to the console, you can explore the data object and locate what needs to be placed as a reference from handlebars.</p>
<p>Foundry VTT includes the following Handlebars Helpers in its API:</p>
<dl>
<dt>{{select}}</dt>
<dd>Assists in configuring an <code>&lt;option&gt;</code> within a <code>&lt;select&gt;</code> field.</dd>
<dt>{{checked}}</dt>
<dd>Assists in configuring a checkbox form input.</dd>
<dt>{{formatNumber}}</dt>
<dd>Applies formatting to numbers.</dd>
<dt>{{timeSince}}</dt>
<dd>Gets the time that has passed since another time value.</dd>
<dt>{{filepicker}}</dt>
<dd>Creates an instance of a filepicker.</dd>
<dt>{{editor}}</dt>
<dd>Creates an instance of a tinyMCE editor.</dd>
<dt>{{localize}}</dt>
<dd>Adds a localized text string that can be called in order to provide better support for i18n translations.</dd>
<dt>{{eq}}, {{ne}}, {{lt}}, {{gt}}, {{lte}}, {{gte}}</dt>
<dd>Logical operation helpers that check if something is equal to, not equal to, less than, greater than, less than or equal to, greater than or equal to.</dd>
</dl>