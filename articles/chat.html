<h2>Overview</h2>
<p>Foundry Virtual Tabletop supports various ways to convey player dialogue and actions, both in and out of character, through messages in the chat log. This page provides an overview on these chat messages and their functionality.</p>

<h2 id="chatlog" class="border">The Chat Log</h2>
<p>All chat messages can be accessed through the Chat Log sidebar in-game. At the bottom of this sidebar, users can use the text field to enter messages that are viewable by others. Pressing Enter will send a written message, while pressing Shift + Enter will add a new line to the message. Pressing Up arrow will bring up the last message or command entered.</p>

<h4 id="chatsaving">Saving</h4>
<p>Gamemasters can save the chat log to a file through the Export Chat Log button above the text field (marked with a floppy disk icon). This exports all available chat messages into a .txt file.</p>

<h4 id="chatdeleting">Deleting</h4>
<p>Gamemasters can clear the chat log through the "Clear Chat Log" button above the text field (marked with a trash can icon). This deletes all messages in the chat log. A gamemaster can similarly delete individual messages, with the trash can found on the top right corner of each message.</p>

<h4 id="chatrollmodes">Roll Modes</h4>
<p>The roll modes dropdown configures the type of dice roll that will be dispatched by automated rolls created by game systems, modules, or macros. Note that the selected roll mode provides guidance for automated rolls, but using the <code>/roll</code> command <em>always</em> results in a public roll. See dice rolling details for more information.</p>

<h3 id="chatpopout">Pop-out Chat Messages</h3>
<p>Some game systems allow certain chat messages to be popped out into their own window for quick reference once they have been posted. This must be supported by the system specifically. If the message has pop-out support, when you right click on the message you can choose the "Pop Out Message" option from the context menu. If the message does not support pop-out, this will not appear.</p>

<section class="collapsible">
	<header class="collapsible-header">Chat Commands</header>
	<div class="collapsible-content">
<p>While entering a message, users are able to prefix their message with a command. Some commands related to sending chat messages are listed below:</p>

<h4 id="chatic">In Character</h4>
<p>Syntax: <code>/ic {message}</code></p>
<p>Causes the message to be spoken by an associated character. With a character's token selected (or with a speaker identified through the Player Configuration window), players will automatically speak in character, removing the need to enter this command for every message.</p>

<h4 id="chatooc">Out of Character</h4>
<p>Syntax: <code>/ooc {message}</code></p>
<p>Causes the message to be spoken out of character (OOC). OOC messages will be outlined by the player's color to make them more easily recognizable. A player without an identified speaker or a selected token will automatically speak out of character.</p>

<h4 id="chatemotes">Emotes</h4>
<p>Syntax: <code>/emote {message}</code> or <code>/em {message}</code> or <code>/me {message}</code></p>
<p>Causes the message to be an emote performed by the selected character. Emotes are in-character actions conveyed through text by the player, and therefore require the player to select a token (or link a character through the Player Configuration window). Entering "/emote waves his hand." while controlling a character named Simon will send the message, "Simon waves his hand."</p>

<h4 id="private">Whispered Messages</h4>
<p>Syntax: <code>/whisper {target} {message} or /w {target} {message}</code></p>
<p>Whispers a message to the target. If the user sending the message does not have the "Private Messages" permission, they cannot use this chat command. If the whisper's target is an Actor that is assigned to a User as their character, the whisper will be sent to that User.</p>
<p>Note that you can message multiple users at once by enclosing their names as a comma separated list within brackets. For example <code>/w [Andrew, Tim, Julia] What do you think? Should we attack, or sneak past?</code>. Lastly, the names <code>gm</code> and <code>players</code> will send a whispered message to all Game Master users or all non-GM users respectively.</p>

<h4 id="rolls">Dice Rolls</h4>
<p>Syntax: <code>/roll</code>, <code>/gmroll</code>, <code>/blindroll</code>, <code>/selfroll</code></p>
<p>Rolls dice as a chat message. In the chat log, rolls can be clicked to expand their tooltip, showing the value of each individual roll. It can be clicked again to collapse the display. Refer to the @Article[dice] article for further details on how to roll dice in Foundry VTT. Once a roll is placed, you can expand the rolls to see detailed results by clicking on the rolled total.</p>
</div>
</section>

<h3 id="chatbubbles">Chat Bubbles</h3>
<figure class="right">@Asset[14]</a>
<figcaption>An example chat bubble displayed for an in-character message. The camera pans to focus on the speaker.</figcaption>
</figure>
<p>When an in-character or emote chat message is sent from the perspective of a placed Token, the camera will be moved to focus on the actor and a chat bubble will appear above that Token's head illustrating the dialog visually on the game canvas. There are two toggles found in core @Article[settings] which can configure the behavior of chat bubbles:</p>
<ul>
<li><strong>Enable Chat Bubbles</strong> toggles the appearance of chat bubbles on or off.</li>
<li><strong>Pan to Token Speaker</strong> toggles camera panning to focus on the dialog speaker on or off.</li>
</ul>

<h2 id="api" class="border">API References</h2>
<p>To interact with Tokens programmatically, consider using the following API concepts:</p>
<ul>
	<li>The @API[classes/client.ChatMessage, The ChatMessage Document]</li>
	<li>The @API[classes/client.Messages,The Messages Collection]</li>
	<li>The @API[classes/client.ChatLog,The ChatLog Application]</li>
</ul>