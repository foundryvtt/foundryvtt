

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Compendium Content Packs &mdash; Foundry Virtual Tabletop Alpha 0.0.6 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/fvtt.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="The Game Canvas" href="../canvas.html" />
    <link rel="prev" title="The Audio Playlist Entity" href="playlist.html" /> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Foundry Virtual Tabletop
          

          
          </a>

          
            
            
              <div class="version">
                0.0.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Foundry Virtual Tabletop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../features.html">Anticipated Features and Timelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">End User License Agreement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hosting.html">Hosting and Connectivity Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial.html">Getting Started with FVTT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../entities.html">Game Entities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dice.html">Rolling Dice</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../api.html">Developer API Documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../entities.html">Game Entities API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="abstract.html">Entity and Collection Abstractions</a></li>
<li class="toctree-l3"><a class="reference internal" href="user.html">The User Entity</a></li>
<li class="toctree-l3"><a class="reference internal" href="scene.html">The Scene Entity</a></li>
<li class="toctree-l3"><a class="reference internal" href="actor.html">The Actor Entity</a></li>
<li class="toctree-l3"><a class="reference internal" href="item.html">The Item Entity</a></li>
<li class="toctree-l3"><a class="reference internal" href="playlist.html">The Audio Playlist Entity</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Compendium Content Packs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-compendium-pack-class">The Compendium Pack Class</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../canvas.html">The Game Canvas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dice.html">Dice Rolling API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ui.html">Creating UI Elements</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../systems.html">Game System Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">Featured Game Systems and Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../partnerships.html">Community Partnerships</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../notes/notes.html">Update Notes Archive</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Foundry Virtual Tabletop</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../api.html">Developer API Documentation</a> &raquo;</li>
        
          <li><a href="../entities.html">Game Entities API</a> &raquo;</li>
        
      <li>Compendium Content Packs</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/pages/api/entities/compendium.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="compendium-content-packs">
<span id="compendiumapi"></span><h1>Compendium Content Packs<a class="headerlink" href="#compendium-content-packs" title="Permalink to this headline">¶</a></h1>
<p>Module developers can interact with compendum packs in a programmatic way using the API offered by the
<a class="reference internal" href="#Compendium" title="Compendium"><code class="xref js js-class docutils literal notranslate"><span class="pre">Compendium()</span></code></a> class.</p>
<hr class="docutils" />
<div class="section" id="the-compendium-pack-class">
<h2>The Compendium Pack Class<a class="headerlink" href="#the-compendium-pack-class" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="Compendium">
<em class="property">class </em><code class="descname">Compendium</code><span class="sig-paren">(</span><em>metadata</em>, <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#Compendium" title="Permalink to this definition">¶</a></dt>
<dd><p>The Compendium class provides an interface for interacting with compendium packs which are
collections of similar Entities which are stored outside of the world database but able to
be easily imported into an active session.</p>
<p>When the game session is initialized, each available compendium pack is constructed and
added to the <code class="docutils literal notranslate"><span class="pre">game.packs</span></code>.</p>
<p>Each Compendium is distinctly referenced using its canonical “collection” name which is a
unique string that contains the module name which provides the compendium as well as the
name of the pack within that module. For example, in the D&amp;D5e system, the compendium pack
which provides the spells available within the SRD has the collection name “dnd5e.spells”.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>metadata</strong> (<em>Object</em>) – The compendium metadata, an object provided by game.data</li>
<li><strong>options</strong> (<em>Object</em>) – Application rendering options</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Examples:</strong></p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">// Let&#39;s learn the collection names of all the compendium packs available within a game</span>
<span class="nx">game</span><span class="p">.</span><span class="nx">packs</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">p</span> <span class="p">=&gt;</span> <span class="nx">p</span><span class="p">.</span><span class="nx">collection</span><span class="p">);</span>

<span class="c1">// Suppose we are working with a particular pack named &quot;dnd5e.spells&quot;</span>
<span class="kr">const</span> <span class="nx">pack</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">packs</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">p</span> <span class="p">=&gt;</span> <span class="nx">p</span><span class="p">.</span><span class="nx">collection</span> <span class="o">===</span> <span class="s2">&quot;dnd5e.spells&quot;</span><span class="p">);</span>

<span class="c1">// We can load the index of the pack which contains all entity IDs, names, and image icons</span>
<span class="nx">pack</span><span class="p">.</span><span class="nx">getIndex</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="nx">index</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">index</span><span class="p">));</span>

<span class="c1">// We can find a specific entry in the compendium by its name</span>
<span class="kd">let</span> <span class="nx">entry</span> <span class="o">=</span> <span class="nx">pack</span><span class="p">.</span><span class="nx">index</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">e</span> <span class="p">=&gt;</span> <span class="nx">e</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;Acid Splash&quot;</span><span class="p">);</span>

<span class="c1">// Given the entity ID of &quot;Acid Splash&quot; we can load the full Entity from the compendium</span>
<span class="nx">pack</span><span class="p">.</span><span class="nx">getEntity</span><span class="p">(</span><span class="nx">entry</span><span class="p">.</span><span class="nx">id</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">spell</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">spell</span><span class="p">));</span>
</pre></div>
</div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">// We often may want to programmatically create new Compendium content</span>
<span class="c1">// Let&#39;s start by creating a custom spell as an Item instance</span>
<span class="kd">let</span> <span class="nx">itemData</span> <span class="o">=</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Custom Death Ray&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;Spell&quot;</span><span class="p">};</span>
<span class="kd">let</span> <span class="nx">item</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Item</span><span class="p">(</span><span class="nx">itemData</span><span class="p">);</span>

<span class="c1">// Once we have an entity for our new Compendium entry we can import it, if the pack is unlocked</span>
<span class="nx">pack</span><span class="p">.</span><span class="nx">importEntity</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>

<span class="c1">// When the entity is imported into the compendium it will be assigned a new ID, so let&#39;s find it</span>
<span class="nx">pack</span><span class="p">.</span><span class="nx">getIndex</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="nx">index</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">entry</span> <span class="o">=</span> <span class="nx">index</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">e</span> <span class="p">=&gt;</span> <span class="nx">e</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="nx">itemData</span><span class="p">.</span><span class="nx">name</span><span class="p">));</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">entry</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// If we decide to remove an entry from the compendium we can do that by the entry ID</span>
<span class="nx">pack</span><span class="p">.</span><span class="nx">removeEntry</span><span class="p">(</span><span class="nx">entry</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
</pre></div>
</div>
<dl class="function">
<dt id="Compendium._render">
<code class="descclassname">Compendium.</code><code class="descname">_render</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Compendium._render" title="Permalink to this definition">¶</a></dt>
<dd><p>Override the default <a class="reference internal" href="../apps/application.html#Application" title="Application"><code class="xref js js-class docutils literal notranslate"><span class="pre">Application()</span></code></a> rendering logic to wrap the render call in a promise which
retrieves the compendium data.</p>
</dd></dl>

<dl class="function">
<dt id="Compendium.close">
<code class="descclassname">Compendium.</code><code class="descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Compendium.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Customize Compendium closing behavior to toggle the sidebar folder status icon</p>
</dd></dl>

<dl class="attribute">
<dt id="Compendium.collection">
<code class="descclassname">Compendium.</code><code class="descname">collection</code><a class="headerlink" href="#Compendium.collection" title="Permalink to this definition">¶</a></dt>
<dd><p>The canonical Compendium name - comprised of the originating module and the pack name</p>
</dd></dl>

<dl class="function">
<dt id="Compendium.create">
<code class="descclassname">Compendium.</code><code class="descname">create</code><span class="sig-paren">(</span><em>metadata</em><span class="sig-paren">)</span><a class="headerlink" href="#Compendium.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new Compendium pack using provided</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>metadata</strong> (<em>Object</em>) – The compendium metadata used to create the new pack</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>Promise.&lt;Compendium&gt;</strong> –</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="Compendium.entity">
<code class="descclassname">Compendium.</code><code class="descname">entity</code><a class="headerlink" href="#Compendium.entity" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>type:</strong> String</p>
<p>The Entity type which is allowed to be stored in this collection</p>
</dd></dl>

<dl class="function">
<dt id="Compendium.getContent">
<code class="descclassname">Compendium.</code><code class="descname">getContent</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Compendium.getContent" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the complete set of content for this compendium, loading all entries in full
Returns a Promise that resolves to an Array of entries</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>Promise.&lt;Array&gt;</strong> –</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="Compendium.getData">
<code class="descclassname">Compendium.</code><code class="descname">getData</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Compendium.getData" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the Compendium index as the data for rendering
First query the server to obtain the index and then return it once prepared</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>Promise.Object</strong> – The data to render</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="Compendium.getEntity">
<code class="descclassname">Compendium.</code><code class="descname">getEntity</code><span class="sig-paren">(</span><em>entryId</em><span class="sig-paren">)</span><a class="headerlink" href="#Compendium.getEntity" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a single Compendium entry as an Entity instance</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>entryId</strong> (<em>String</em>) – The compendium entry ID to instantiate</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>Promise</strong> – A Promise containing the returned Entity</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="Compendium.getEntry">
<code class="descclassname">Compendium.</code><code class="descname">getEntry</code><span class="sig-paren">(</span><em>entryId</em><span class="sig-paren">)</span><a class="headerlink" href="#Compendium.getEntry" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a single Compendium entry as an Object</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>entryId</strong> (<em>String</em>) – The compendium entry ID to retrieve</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>Promise</strong> – A Promise containing the return entry data, or undefined</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="Compendium.getIndex">
<code class="descclassname">Compendium.</code><code class="descname">getIndex</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Compendium.getIndex" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the Compendium index
Contains names and IDs of all data in the compendium</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>Promise</strong> – A Promise containing an index of all compendium entries</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="Compendium.importEntity">
<code class="descclassname">Compendium.</code><code class="descname">importEntity</code><span class="sig-paren">(</span><em>entity</em><span class="sig-paren">)</span><a class="headerlink" href="#Compendium.importEntity" title="Permalink to this definition">¶</a></dt>
<dd><p>Import a new Entity into a Compendium pack</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>entity</strong> (<a class="reference internal" href="abstract.html#Entity" title="Entity"><em>Entity</em></a>) – The Entity instance you wish to import</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="Compendium.metadata">
<code class="descclassname">Compendium.</code><code class="descname">metadata</code><a class="headerlink" href="#Compendium.metadata" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>type:</strong> Object</p>
<p>The compendium metadata which defines the compendium content and location</p>
</dd></dl>

<dl class="attribute">
<dt id="Compendium.public">
<code class="descclassname">Compendium.</code><code class="descname">public</code><a class="headerlink" href="#Compendium.public" title="Permalink to this definition">¶</a></dt>
<dd><p>Is this Compendium pack publicly visible to all players or private for the GM only?</p>
</dd></dl>

<dl class="function">
<dt id="Compendium.removeEntity">
<code class="descclassname">Compendium.</code><code class="descname">removeEntity</code><span class="sig-paren">(</span><em>entryId</em><span class="sig-paren">)</span><a class="headerlink" href="#Compendium.removeEntity" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a single Compendium entry by its ID</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>entryId</strong> (<em>String</em>) – The compendium entry ID to remove</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../canvas.html" class="btn btn-neutral float-right" title="The Game Canvas" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="playlist.html" class="btn btn-neutral" title="The Audio Playlist Entity" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Foundry Gaming LLC.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'Alpha 0.0.6',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>